# 血压图表增强 - 收缩压和舒张压同时显示

## 问题描述
用户反馈收缩压和舒张压应该在同一个图中显示，当前的血压趋势图只显示收缩压，缺少舒张压的对比数据。

## 解决方案

### 1. 增强LineChart组件

#### 新增多条线支持
```javascript
// 新增series参数支持多条线数据
const LineChart = ({
  data = [],
  width,
  height = 200,
  color = '#2196F3',
  showPoints = true,
  showGrid = true,
  yAxisLabel = '',
  xAxisLabel = '',
  title = '',
  series = null // 新增：支持多条线数据
}) => {
```

#### 多条线数据结构
```javascript
series: [
  {
    name: '收缩压',
    data: [
      { label: '1/10', value: 135 },
      { label: '1/11', value: 142 },
      // ... 更多数据点
    ],
    color: '#F44336'
  },
  {
    name: '舒张压',
    data: [
      { label: '1/10', value: 85 },
      { label: '1/11', value: 90 },
      // ... 更多数据点
    ],
    color: '#2196F3'
  }
]
```

### 2. 技术实现

#### 数据处理逻辑
- **兼容性设计**: 保持原有单条线功能的同时，新增多条线支持
- **自动检测**: 根据是否传入`series`参数自动判断显示模式
- **统一范围**: 所有数据系列共享相同的Y轴范围，便于对比

#### 渲染逻辑优化
- **多条路径**: 为每条线生成独立的SVG路径
- **独立颜色**: 每条线使用独立的颜色配置
- **数据点**: 每条线的数据点使用对应的颜色

#### 图例系统
- **自动图例**: 多条线模式下自动显示图例
- **水平布局**: 图例项水平排列，居中显示
- **颜色标识**: 使用小色块标识每条线的颜色

### 3. 患者详情页面集成

#### 血压数据结构更新
```javascript
// 原始结构（单条线）
bloodPressure: [
  { label: '1/10', value: 135 },
  // ... 仅收缩压数据
]

// 新结构（多条线）
bloodPressure: {
  systolic: [
    { label: '1/10', value: 135 },
    { label: '1/11', value: 142 },
    // ... 收缩压数据
  ],
  diastolic: [
    { label: '1/10', value: 85 },
    { label: '1/11', value: 90 },
    // ... 舒张压数据
  ]
}
```

#### 图表使用方式更新
```javascript
// 新的使用方式
<LineChart
  title="血压趋势"
  height={220}
  yAxisLabel="mmHg"
  xAxisLabel="日期"
  series={[
    {
      name: '收缩压',
      data: patientData.healthMetrics.trends.bloodPressure.systolic,
      color: '#F44336'
    },
    {
      name: '舒张压',
      data: patientData.healthMetrics.trends.bloodPressure.diastolic,
      color: '#2196F3'
    }
  ]}
/>
```

### 4. 视觉设计

#### 颜色方案
- **收缩压**: #F44336（红色）- 表示较高的压力值
- **舒张压**: #2196F3（蓝色）- 表示较低的压力值
- **图例**: 使用小色块和文字标识

#### 布局优化
- **图表高度**: 从200px增加到220px，为图例留出空间
- **图例位置**: 位于图表底部，水平居中显示
- **间距优化**: 图例项之间保持适当间距

### 5. 功能特性

#### 兼容性
- **向后兼容**: 保持原有单条线功能正常工作
- **渐进增强**: 新功能不影响现有图表的使用

#### 用户体验
- **直观对比**: 收缩压和舒张压在同一图表中，便于对比分析
- **清晰标识**: 图例清楚标识每条线的含义
- **医学意义**: 符合医学上同时监测收缩压和舒张压的需求

#### 数据分析
- **趋势对比**: 医生可以同时观察两个血压值的变化趋势
- **异常检测**: 更容易发现血压异常模式
- **治疗效果**: 更好地评估治疗方案的效果

## 测试验证

### 功能测试
- [x] 多条线数据正确显示
- [x] 颜色区分清晰
- [x] 图例正确显示
- [x] 数据点位置准确
- [x] 向后兼容性良好

### 医学验证
- [x] 收缩压和舒张压数据范围合理
- [x] 趋势变化符合医学逻辑
- [x] 图表便于临床分析

### 用户体验测试
- [x] 图表易于理解
- [x] 图例清晰明了
- [x] 颜色对比度良好
- [x] 响应式布局正常

## 临床价值

### 医生端优势
1. **完整信息**: 同时查看收缩压和舒张压，获得完整的血压信息
2. **趋势分析**: 观察两个数值的相对变化，更好地评估病情
3. **治疗调整**: 根据双重数据调整治疗方案

### 患者管理
1. **全面监测**: 提供更全面的血压监测数据
2. **异常预警**: 更容易发现血压异常模式
3. **效果评估**: 更准确地评估治疗效果

## 总结

通过增强LineChart组件的多条线支持功能，成功实现了收缩压和舒张压在同一图表中的显示。这一改进：

1. **提升了数据可视化的完整性**
2. **符合医学上的血压监测需求**
3. **保持了良好的向后兼容性**
4. **提供了更好的用户体验**

现在医生可以在一个图表中同时查看患者的收缩压和舒张压趋势，更好地进行临床分析和治疗决策。 