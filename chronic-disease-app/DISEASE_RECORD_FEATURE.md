# 疾病记录功能实现

## 功能概述
在患者详情页面的概览中添加疾病记录功能，让医生可以查看和编辑患者的慢性疾病记录，便于后期医生了解病人情况。

## 功能需求
根据用户要求，需要支持以下慢性疾病的记录：
- 阿尔茨海默病
- 关节炎
- 哮喘
- 癌症
- 慢性阻塞性肺病（COPD）
- 克罗恩病
- 囊性纤维化
- 任何原因导致的痴呆症
- 糖尿病
- 子宫内膜异位症
- 癫痫
- 纤维肌痛
- 心脏病
- 高血压
- 艾滋病毒/艾滋病
- 偏头痛
- 心境障碍（躁郁症、循环性情感症和抑郁症）
- 多发性硬化症
- 嗜睡症
- 帕金森病
- 镰状细胞性贫血症
- 溃疡性结肠炎

## 技术实现

### 1. 数据结构设计

#### 疾病列表常量
```javascript
const chronicDiseases = [
  { id: 'alzheimer', name: '阿尔茨海默病' },
  { id: 'arthritis', name: '关节炎' },
  { id: 'asthma', name: '哮喘' },
  { id: 'cancer', name: '癌症' },
  { id: 'copd', name: '慢性阻塞性肺病（COPD）' },
  { id: 'crohn', name: '克罗恩病' },
  { id: 'cystic_fibrosis', name: '囊性纤维化' },
  { id: 'dementia', name: '痴呆症' },
  { id: 'diabetes', name: '糖尿病' },
  { id: 'endometriosis', name: '子宫内膜异位症' },
  { id: 'epilepsy', name: '癫痫' },
  { id: 'fibromyalgia', name: '纤维肌痛' },
  { id: 'heart_disease', name: '心脏病' },
  { id: 'hypertension', name: '高血压' },
  { id: 'hiv_aids', name: '艾滋病毒/艾滋病' },
  { id: 'migraine', name: '偏头痛' },
  { id: 'mood_disorder', name: '心境障碍（躁郁症、循环性情感症和抑郁症）' },
  { id: 'multiple_sclerosis', name: '多发性硬化症' },
  { id: 'narcolepsy', name: '嗜睡症' },
  { id: 'parkinson', name: '帕金森病' },
  { id: 'sickle_cell', name: '镰状细胞性贫血症' },
  { id: 'ulcerative_colitis', name: '溃疡性结肠炎' }
];
```

#### 患者数据结构
```javascript
patientData: {
  basicInfo: {
    // ... 其他基本信息
    diseases: [
      'hypertension',
      'diabetes',
      'heart_disease'
    ]
  }
}
```

### 2. 核心功能函数

#### 更新患者疾病记录
```javascript
const updatePatientDiseases = (diseaseId, isChecked) => {
  setPatientData(prev => ({
    ...prev,
    basicInfo: {
      ...prev.basicInfo,
      diseases: isChecked 
        ? [...prev.basicInfo.diseases, diseaseId]
        : prev.basicInfo.diseases.filter(id => id !== diseaseId)
    }
  }));
};
```

#### 获取疾病名称
```javascript
const getDiseaseName = (diseaseId) => {
  const disease = chronicDiseases.find(d => d.id === diseaseId);
  return disease ? disease.name : diseaseId;
};
```

### 3. 用户界面设计

#### 疾病记录显示区域
- **位置**: 患者概览页面，联系信息卡片后面
- **布局**: 卡片式布局，包含标题和编辑按钮
- **显示方式**: 使用Chip组件展示已选择的疾病
- **空状态**: 当没有疾病记录时显示提示文字

#### 疾病记录编辑对话框
- **触发方式**: 点击编辑按钮（铅笔图标）
- **交互方式**: 使用Checkbox组件，支持多选
- **布局**: 垂直列表布局，每行一个疾病选项
- **滚动支持**: 支持滚动浏览所有疾病选项
- **操作按钮**: 取消和保存按钮

### 4. 视觉设计

#### 疾病标签样式
- **背景颜色**: #E3F2FD（浅蓝色）
- **文字颜色**: #1976D2（深蓝色）
- **图标**: medical-bag图标
- **字体**: 12px，中等字重

#### 编辑对话框样式
- **最大高度**: 80%屏幕高度
- **背景**: 白色，12px圆角
- **滚动区域**: 最大高度400px
- **复选框**: 标准Material Design样式

### 5. 交互流程

#### 查看疾病记录
1. 进入患者详情页面
2. 查看概览选项卡
3. 在联系信息下方查看疾病记录卡片
4. 已选择的疾病以蓝色标签形式显示

#### 编辑疾病记录
1. 点击疾病记录卡片右上角的编辑按钮
2. 弹出疾病编辑对话框
3. 滚动浏览所有可选疾病
4. 勾选/取消勾选相应疾病
5. 点击保存按钮确认修改
6. 对话框关闭，疾病记录更新显示

### 6. 数据管理

#### 状态管理
- **editDiseases**: 控制编辑对话框的显示/隐藏
- **patientData.basicInfo.diseases**: 存储患者的疾病记录数组

#### 数据持久化
- 当前实现为本地状态管理
- 预留服务器同步接口，可在保存时调用API
- 支持数据实时更新和状态同步

### 7. 临床价值

#### 医生端优势
1. **完整病史**: 快速了解患者的所有慢性疾病
2. **诊断辅助**: 为诊断和治疗提供重要参考
3. **风险评估**: 基于疾病记录进行风险评估
4. **治疗规划**: 考虑疾病间的相互作用

#### 患者管理
1. **标准化记录**: 使用标准化的疾病分类
2. **信息完整**: 确保重要疾病信息不遗漏
3. **便于追踪**: 疾病记录的变化可追踪
4. **团队协作**: 便于医疗团队成员间的信息共享

### 8. 技术特性

#### 用户体验
- **直观操作**: 点击编辑按钮即可修改
- **清晰显示**: 疾病以标签形式直观展示
- **响应式设计**: 适配不同屏幕尺寸
- **无障碍支持**: 支持屏幕阅读器等辅助功能

#### 性能优化
- **按需加载**: 对话框组件按需渲染
- **状态优化**: 使用React的useState进行状态管理
- **渲染优化**: 使用key值优化列表渲染

#### 扩展性
- **易于扩展**: 新增疾病只需修改疾病列表常量
- **国际化支持**: 疾病名称可支持多语言
- **自定义分类**: 可支持疾病分类和标签

## 使用说明

### 医生操作指南
1. **查看疾病记录**: 在患者详情页面概览中查看已记录的疾病
2. **编辑疾病记录**: 点击编辑按钮，勾选患者的慢性疾病
3. **保存修改**: 完成编辑后点击保存按钮
4. **取消编辑**: 如需取消修改，点击取消按钮

### 注意事项
1. 疾病记录应基于患者的实际诊断
2. 定期更新疾病记录，确保信息准确
3. 重要疾病变化应及时记录
4. 可结合其他临床信息进行综合判断

## 总结

疾病记录功能为慢性疾病管理系统提供了重要的患者信息管理能力，通过标准化的疾病记录，医生可以更好地了解患者的完整病史，为临床决策提供重要支持。

功能特点：
- **全面覆盖**: 支持22种常见慢性疾病
- **操作简便**: 直观的勾选界面
- **信息完整**: 与患者其他信息集成显示
- **临床实用**: 符合医疗工作流程需求

该功能的实现提升了患者信息管理的完整性和实用性，为医生提供了更好的患者管理工具。 