# 图表标签重合问题修复

## 问题描述
用户反馈可视化图表的单位位置和图标有重合，Y轴单位标签与Y轴数值标签位置重叠，影响可读性。

## 问题分析

### 原始问题
1. **Y轴单位标签位置**: 固定在 `left: 10, top: height / 2`
2. **Y轴数值标签位置**: 在 `x={padding - 10}` 位置
3. **重合问题**: 两个标签在同一个水平位置区域，导致重叠

### 受影响的组件
- `LineChart.js`: 折线图Y轴标签重合
- `BarChart.js`: 柱状图Y轴标签重合
- `PieChart.js`: 饼图无此问题（没有轴标签）

## 修复方案

### 1. LineChart.js 修复

#### 增加左边距
```javascript
// 从40增加到60，为Y轴标签留出更多空间
const padding = 60;
```

#### 调整数值标签位置
```javascript
// 从padding - 10调整到padding - 30，向左移动数值标签
x={padding - 30}
```

#### 调整单位标签位置
```javascript
// 调整单位标签位置，避免与数值标签重合
style={{
  position: 'absolute',
  left: 5,              // 从10调整到5
  top: height / 2 - 20, // 从height / 2调整到height / 2 - 20
  fontSize: 11,         // 从12调整到11
  textAlign: 'center'   // 添加文本居中对齐
}}
```

### 2. BarChart.js 修复

#### 增加左边距
```javascript
// 从50增加到70，为Y轴标签留出更多空间
const padding = 70;
```

#### 调整数值标签位置
```javascript
// 从padding - 10调整到padding - 40，向左移动数值标签
x={padding - 40}
```

#### 调整单位标签位置
```javascript
// 调整单位标签位置，避免与数值标签重合
style={{
  position: 'absolute',
  left: 5,              // 从10调整到5
  top: height / 2 - 25, // 从height / 2调整到height / 2 - 25
  fontSize: 11,         // 从12调整到11
  textAlign: 'center'   // 添加文本居中对齐
}}
```

## 修复效果

### 空间布局优化
- **LineChart**: 左边距从40px增加到60px
- **BarChart**: 左边距从50px增加到70px
- **数值标签**: 向左移动，避免与图表内容重合
- **单位标签**: 调整到最左侧，独立显示区域

### 视觉效果改善
- **清晰分离**: 单位标签和数值标签不再重合
- **更好可读性**: 标签文字清晰可见
- **统一样式**: 字体大小统一为11px
- **居中对齐**: 文本居中显示，更加美观

### 具体位置调整
| 组件 | 元素 | 原位置 | 新位置 | 说明 |
|------|------|--------|--------|------|
| LineChart | 左边距 | 40px | 60px | 增加空间 |
| LineChart | 数值标签 | padding-10 | padding-30 | 向左移动 |
| LineChart | 单位标签 | left:10, top:height/2 | left:5, top:height/2-20 | 避免重合 |
| BarChart | 左边距 | 50px | 70px | 增加空间 |
| BarChart | 数值标签 | padding-10 | padding-40 | 向左移动 |
| BarChart | 单位标签 | left:10, top:height/2 | left:5, top:height/2-25 | 避免重合 |

## 使用场景验证

### 1. 仪表板图表
- **血压趋势图**: Y轴标签"mmHg"不再与数值重合
- **告警类型分布**: Y轴标签"告警数量"清晰显示
- **患者风险分布**: 饼图无影响

### 2. 患者详情页图表
- **血压趋势**: Y轴标签"mmHg"独立显示
- **血糖趋势**: Y轴标签"mmol/L"不与数值重合
- **心率趋势**: Y轴标签"bpm"清晰可见

### 3. 用药计划图表
- **依从性趋势**: Y轴标签"依从性 (%)"正确显示
- **服药时间分布**: Y轴标签"药物数量"不重合

## 兼容性保证

### 响应式设计
- 在不同屏幕尺寸下标签位置自适应
- 保持标签与图表内容的相对位置

### 数据适配
- 支持不同数据范围的图表
- 数值标签根据数据自动调整位置

### 样式一致性
- 统一的字体大小（11px）
- 统一的颜色（#666）
- 统一的对齐方式

## 总结

通过调整图表组件的左边距、数值标签位置和单位标签位置，成功解决了Y轴标签重合的问题。现在：

1. **单位标签**独立显示在最左侧
2. **数值标签**在合适的位置显示数值
3. **图表内容**有足够的显示空间
4. **整体布局**更加清晰美观

这些修复确保了所有图表的标签都能清晰显示，提升了数据可视化的可读性和用户体验。 